<div id="root" class="container-fluid border border-secondary rounded-2">
  @if(threadmark){
    <div class="row justify-content-between border-bottom border-secondary">
      <div class="col-sm-2 my-auto">
        <span class="">Threadmarks:</span>
        <span [ngClass]="{'message-new': isNew}" class="mx-1 p-1 rounded">{{threadmark.name}}</span>
        @if(isNew){
            <span class="message-new">New</span>
        }
      </div>
      <div class="col-sm-1">
        <button type="button" class="btn bg-secondary">Threadmarks</button>
      </div>
    </div>
  }

  <div class="row py-2">
    <!-- User Card -->
    <div class="col-sm-1">
      @let author = post.author;
      <div class="bg-black border border-secondary py-2">
        <div id="user-icon" class="d-flex mx-auto rounded-2 align-items-center justify-content-center">
          @let url = author.icon_url;
          @if(url){
            <img src="{{url}}" class="flex-fill"/>
          } @else{
            <span>{{author.username[0] | uppercase}}</span>
          }
        </div>
      </div>
      <div class="bg-secondary border text-center">
        <a routerLink="/users/{{author.username}}.{{author.id}}">{{author.username}}</a>
        @if(author.status){
          <p>{{author.status}}</p>
        }
      </div>
    </div>

    <div class="col d-flex flex-column">
      <!-- Top Anchor -->
      <div class="header row justify-content-between pb-1">
        <div class="col-sm-1 mx-0">
          <span>{{post.posted_on | date: "yyyy/MM/dd"}}</span>
        </div>
        <div class="col-sm-1">
          {{post.id}}
        </div>
      </div>

      <!-- Greedy center -->
      <div class="row">
        Content
      </div>

      <!-- Bottom Anchor-->
      @if(post.author.signature){
        <div class="row mt-auto">
          Signature
        </div>
      }
      <div class="row mt-auto justify-content-between">
        <div class="col-sm-1">
          <a class="report-link" routerLink="/posts/{{post.id}}/report">
            <i class="bi bi-bell"></i>
            Report
          </a>
        </div>
        <div class="col-sm-3 text-end">
          <a class="action" rel="nofollow" href="/posts/{{post.id}}/reactions?id=1">
            <i class="bi bi-hand-thumbs-up-fill grow"></i>
            Like
          </a>
          <a>
            Award
          </a>
          <a>
            Quote
          </a>
          <a>
            Replay
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="post">
  @if(threadmark){
    <div id="threadmark-header">
      <div class="left">
        <span class="highlight-1">Threadmarks:</span>
        <span class="box">{{threadmark.name}}</span>
      </div>
      <div class="right">
        @if(threadmark.id > 0){
          <a class="box" [routerLink]="" (click)="toggleThreadmarkModal()">&lt;</a>
        }
        <a class="box" [routerLink]="" (click)="toggleThreadmarkModal()">Threadmarks</a>
        @if(threadmark.id < thread.threadmarks.length){
          <a class="box" [routerLink]="" (click)="toggleThreadmarkModal()">&gt;</a>
        }
      </div>
    </div>
  }
  <div class="inner">
    <div id="author">
      <div id="author-card">
        <span>{{post.author.username}}</span>
      </div>
    </div>
    <div id="content">
      <div class="flex header">
        <div>
          <span>{{post.posted_on.toLocaleDateString()}}</span>
          <span>Awards x0</span>
        </div>
        <div>
          <span class="message-new">New</span>
          <a [routerLink]="">Share</a>
          <a [routerLink]="">Bookmark</a>
          <a [routerLink]="">#1</a>
        </div>
      </div>
      <div>
        {{post.content}}
      </div>
      @if(post.author.signature){
      <div class="signature">
        Footer
      </div>
      }
      <div class="flex">
        <div>

        </div>
        <div>
          <button>
            <img class="icon grow" ngSrc="/assets/reactions/thumbs-up.svg" height="20" width="20"/>
            Like
          </button>
          <a>
            Award
          </a>
          <a>
            Quote
          </a>
          <a>
            Replay
          </a>
        </div>
      </div>
      <div>

      </div>
    </div>
  </div>
</div>
